<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> No subject
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jemalloc-discuss%40canonware.com?Subject=Re%3A%20No%20subject&In-Reply-To=%3CCAKbZY2b8_zbq2QUr0uAT5BidrByFsOgEF0eDdGwC9iHNVUybng%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000432.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>No subject</H1>
    <B>egmkang.wang</B> 
    <A HREF="mailto:jemalloc-discuss%40canonware.com?Subject=Re%3A%20No%20subject&In-Reply-To=%3CCAKbZY2b8_zbq2QUr0uAT5BidrByFsOgEF0eDdGwC9iHNVUybng%40mail.gmail.com%3E"
       TITLE="No subject">egmkang at gmail.com
       </A><BR>
    <I>Sat Jun 30 00:04:46 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="000432.html">patches for jemalloc 3.0.0 with mingw-w64 
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#433">[ date ]</a>
              <a href="thread.html#433">[ thread ]</a>
              <a href="subject.html#433">[ subject ]</a>
              <a href="author.html#433">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>hi,all.
i'm a new guy using jemalloc.
there is a strange thing.when i *new* a objct and then *free* it,you
know,mismatched free in valgrind, the jemalloc will crash under valgrind.
code like this:
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int  main()
{
    int *pInt = new int();
    printf(&quot;%d\n&quot;,*pInt);
    free(pInt);
    return 0;
}

jemalloc output &quot;src/jemalloc.c:1201: Failed assertion: &quot;malloc_initialized
||<i> IS_INITIALIZER&quot;, and then abort.
</I>
my jemalloc version is 3.0,and debug enabled.

but using another shared library my colleague compiled on red hat 4.3(x64)
using gcc 3.x, it works well.
my os is debian 6.0.5(x64),and gcc is 4.6.2.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://www.canonware.com/pipermail/jemalloc-discuss/attachments/20120630/288a134d/attachment.html">http://www.canonware.com/pipermail/jemalloc-discuss/attachments/20120630/288a134d/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000432.html">patches for jemalloc 3.0.0 with mingw-w64 
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#433">[ date ]</a>
              <a href="thread.html#433">[ thread ]</a>
              <a href="subject.html#433">[ subject ]</a>
              <a href="author.html#433">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.canonware.com/mailman/listinfo/jemalloc-discuss">More information about the jemalloc-discuss
mailing list</a><br>
</body></html>
