<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Huge page support would be useful in JEMalloc
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jemalloc-discuss%40canonware.com?Subject=Re%3A%20Huge%20page%20support%20would%20be%20useful%20in%20JEMalloc&In-Reply-To=%3CCAGKz%3DuJr-p579GA4vXntODbUZ4KhJuvVTe18rSABNPdkOPDSRQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000968.html">
   <LINK REL="Next"  HREF="000970.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Huge page support would be useful in JEMalloc</H1>
    <B>Jeff Hammond</B> 
    <A HREF="mailto:jemalloc-discuss%40canonware.com?Subject=Re%3A%20Huge%20page%20support%20would%20be%20useful%20in%20JEMalloc&In-Reply-To=%3CCAGKz%3DuJr-p579GA4vXntODbUZ4KhJuvVTe18rSABNPdkOPDSRQ%40mail.gmail.com%3E"
       TITLE="Huge page support would be useful in JEMalloc">jeff.science at gmail.com
       </A><BR>
    <I>Tue Dec  2 00:09:47 PST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="000968.html">Huge page support would be useful in JEMalloc
</A></li>
        <LI>Next message: <A HREF="000970.html">[PATCH] Fix test breakage on 32-bit systems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#969">[ date ]</a>
              <a href="thread.html#969">[ thread ]</a>
              <a href="subject.html#969">[ subject ]</a>
              <a href="author.html#969">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Dec 1, 2014 at 3:25 PM, Eric Wong &lt;<A HREF="http://www.canonware.com/mailman/listinfo/jemalloc-discuss">normalperson at yhbt.net</A>&gt; wrote:
&gt;<i> Kenneth Steele &lt;<A HREF="http://www.canonware.com/mailman/listinfo/jemalloc-discuss">ken at ezchip.com</A>&gt; wrote:
</I>&gt;&gt;<i> Ideally, JEMalloc with Huge pages would be the best.
</I>&gt;<i>
</I>&gt;<i> For some apps such as yours, yes.  And jemalloc can already use
</I>&gt;<i> transparent hugepages, but there are downsides to apps (e.g. redis)
</I>&gt;<i> which fork:
</I>&gt;<i>
</I>&gt;<i>   <A HREF="http://mid.gmane.org/CA+XzkVfZV36k-d6mw9xEBgSQQhmfMKwts79wrwMB+3PYydzeCg@mail.gmail.com">http://mid.gmane.org/CA+XzkVfZV36k-d6mw9xEBgSQQhmfMKwts79wrwMB+3PYydzeCg@mail.gmail.com</A>
</I>&gt;<i>
</I>&gt;<i> Not sure if there's an automatic, best-of-both worlds approach...
</I>
Large pages are widely known to be a win in high-performance
computing, e.g. Cray supercomputers.  Not that anyone sane forks
(outside of program launch) in HPC programs, but you can't do it if
you want to in Cray Linux anyways (at least the last time I read the
docs).  Same story for Blue Gene, but since Blue Gene doesn't run
Linux, there are a different set of issues to consider in the context
of jemalloc.

The positive effective of large pages on TLB misses are pretty
obvious, but there are plenty of papers written about this topic if
people need evidence.  TLB misses are more common than fork() in all
of the codes where I care about performance...

I'm optimistic that <A HREF="https://github.com/memkind">https://github.com/memkind</A> will let me exploit
large pages on Cray machines, but I haven't had time to try it yet.

Best,

Jeff

-- 
Jeff Hammond
<A HREF="http://www.canonware.com/mailman/listinfo/jemalloc-discuss">jeff.science at gmail.com</A>
<A HREF="http://jeffhammond.github.io/">http://jeffhammond.github.io/</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000968.html">Huge page support would be useful in JEMalloc
</A></li>
	<LI>Next message: <A HREF="000970.html">[PATCH] Fix test breakage on 32-bit systems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#969">[ date ]</a>
              <a href="thread.html#969">[ thread ]</a>
              <a href="subject.html#969">[ subject ]</a>
              <a href="author.html#969">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.canonware.com/mailman/listinfo/jemalloc-discuss">More information about the jemalloc-discuss
mailing list</a><br>
</body></html>
