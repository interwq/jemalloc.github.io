<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Question regarding jemalloc and JVM
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jemalloc-discuss%40canonware.com?Subject=Re%3A%20Question%20regarding%20jemalloc%20and%20JVM&In-Reply-To=%3C00699E54-225D-4545-9C6C-EC80E05DF1B7%40canonware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000174.html">
   <LINK REL="Next"  HREF="000178.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Question regarding jemalloc and JVM</H1>
    <B>Jason Evans</B> 
    <A HREF="mailto:jemalloc-discuss%40canonware.com?Subject=Re%3A%20Question%20regarding%20jemalloc%20and%20JVM&In-Reply-To=%3C00699E54-225D-4545-9C6C-EC80E05DF1B7%40canonware.com%3E"
       TITLE="Question regarding jemalloc and JVM">jasone at canonware.com
       </A><BR>
    <I>Mon Mar 26 10:00:39 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="000174.html">Question regarding jemalloc and JVM
</A></li>
        <LI>Next message: <A HREF="000178.html">Question regarding jemalloc and JVM
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#176">[ date ]</a>
              <a href="thread.html#176">[ thread ]</a>
              <a href="subject.html#176">[ subject ]</a>
              <a href="author.html#176">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mar 26, 2012, at 9:51 AM, Vijay Parthasarathy wrote:
&gt;<i> looks like it is problematic to use LD_PRELOAD i had various crashes. I understand it is too much to ask, any configuration to look out for? 
</I>&gt;<i> I think most probably i will use JNI to load jemalloc (LD_LIBRARY_PATH), looks like that works fine so far.
</I>&gt;<i> 
</I>&gt;<i> hs_err_pid1622.log:# Problematic frame:
</I>&gt;<i> hs_err_pid1622.log-# C  [libjemalloc.so+0x57f4]  free+0x54
</I>&gt;<i> hs_err_pid1622.log-#
</I>
The crash in free() is the only one that tells me anything at all, and my only guesses are 1) mixed allocator usage or 2) application error, e.g. double free().  I really don't know anything about how the JVM is structured internally , how it interacts with malloc, how it uses/abuses dlopen(), etc., so I'm not going to be of much help without a lot more background information.

Thanks,
Jason
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://jemalloc.net/mailman/jemalloc-discuss/attachments/20120326/20976dd9/attachment.html">http://jemalloc.net/mailman/jemalloc-discuss/attachments/20120326/20976dd9/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000174.html">Question regarding jemalloc and JVM
</A></li>
	<LI>Next message: <A HREF="000178.html">Question regarding jemalloc and JVM
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#176">[ date ]</a>
              <a href="thread.html#176">[ thread ]</a>
              <a href="subject.html#176">[ subject ]</a>
              <a href="author.html#176">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.canonware.com/mailman/listinfo/jemalloc-discuss">More information about the jemalloc-discuss
mailing list</a><br>
</body></html>
