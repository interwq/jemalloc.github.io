<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [PATCH 3/3] Improve zone support for OSX
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jemalloc-discuss%40canonware.com?Subject=Re%3A%20%5BPATCH%203/3%5D%20Improve%20zone%20support%20for%20OSX&In-Reply-To=%3CCAFWcpZ52eDJfNsLst1Zw9U8L06jeum_seTzdCoGqUm2A9apyiQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000157.html">
   <LINK REL="Next"  HREF="000160.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[PATCH 3/3] Improve zone support for OSX</H1>
    <B>Justin Lebar</B> 
    <A HREF="mailto:jemalloc-discuss%40canonware.com?Subject=Re%3A%20%5BPATCH%203/3%5D%20Improve%20zone%20support%20for%20OSX&In-Reply-To=%3CCAFWcpZ52eDJfNsLst1Zw9U8L06jeum_seTzdCoGqUm2A9apyiQ%40mail.gmail.com%3E"
       TITLE="[PATCH 3/3] Improve zone support for OSX">justin.lebar at gmail.com
       </A><BR>
    <I>Tue Mar 20 10:18:13 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="000157.html">[PATCH 3/3] Improve zone support for OSX
</A></li>
        <LI>Next message: <A HREF="000160.html">[PATCH 3/3] Improve zone support for OSX
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#159">[ date ]</a>
              <a href="thread.html#159">[ thread ]</a>
              <a href="subject.html#159">[ subject ]</a>
              <a href="author.html#159">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Mar 20, 2012 at 1:10 PM, Mike Hommey &lt;<A HREF="http://www.canonware.com/mailman/listinfo/jemalloc-discuss">mh+jemalloc at glandium.org</A>&gt; wrote:
&gt;<i> On Tue, Mar 20, 2012 at 01:04:54PM -0400, Justin Lebar wrote:
</I>&gt;&gt;<i> btw, I'm skeptical of the value of supporting OSX 10.5, because 10.5
</I>&gt;&gt;<i> occasionally passes invalid pointers to ozone_size [1].
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> [1] <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=694335">https://bugzilla.mozilla.org/show_bug.cgi?id=694335</A>
</I>&gt;<i>
</I>&gt;<i> For one, not all jemalloc users are going to have the problem, which is
</I>&gt;<i> limited to some APIs.
</I>
True, but we of course don't know the full set of circumstances under
which OSX will pass an invalid pointer.

&gt;<i> Also, AIUI, the current jemalloc code does the right thing for the
</I>&gt;<i> ozone_size, which is not the case in the old jemalloc fork we use in
</I>&gt;<i> Firefox, so depending on what is done with the result of ozone_size,
</I>&gt;<i> it might be okay.
</I>
What's the difference in behavior?

&gt;<i> BTW, I guess you wanted to point to
</I>&gt;<i> <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=702250#c30">https://bugzilla.mozilla.org/show_bug.cgi?id=702250#c30</A>
</I>
Yes, thanks.  And my analysis there is that 10.5 tries to free the
internal pointer.  I'd be impressed if jemalloc handled this
correctly!  (And even more impressed if it worked in general, for
non-huge allocations too.  :)

Anyway, I'm not saying we should strip out all the 10.5 support in
jemalloc.  At least, not immediately.  :)

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000157.html">[PATCH 3/3] Improve zone support for OSX
</A></li>
	<LI>Next message: <A HREF="000160.html">[PATCH 3/3] Improve zone support for OSX
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#159">[ date ]</a>
              <a href="thread.html#159">[ thread ]</a>
              <a href="subject.html#159">[ subject ]</a>
              <a href="author.html#159">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.canonware.com/mailman/listinfo/jemalloc-discuss">More information about the jemalloc-discuss
mailing list</a><br>
</body></html>
