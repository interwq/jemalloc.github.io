<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Patch set: support for iterating over all objects allocated in a	certain arena
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jemalloc-discuss%40canonware.com?Subject=Re%3A%20Patch%20set%3A%20support%20for%20iterating%20over%20all%20objects%20allocated%20in%20a%0A%09certain%20arena&In-Reply-To=%3C1345463499.18021.46.camel%40avalon%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000441.html">
   <LINK REL="Next"  HREF="000443.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Patch set: support for iterating over all objects allocated in a	certain arena</H1>
    <B>Alessandro Pignotti</B> 
    <A HREF="mailto:jemalloc-discuss%40canonware.com?Subject=Re%3A%20Patch%20set%3A%20support%20for%20iterating%20over%20all%20objects%20allocated%20in%20a%0A%09certain%20arena&In-Reply-To=%3C1345463499.18021.46.camel%40avalon%3E"
       TITLE="Patch set: support for iterating over all objects allocated in a	certain arena">a.pignotti at sssup.it
       </A><BR>
    <I>Mon Aug 20 04:51:39 PDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="000441.html">hint on debugging what seems to be a deadlock
</A></li>
        <LI>Next message: <A HREF="000443.html">Need help with patch allowing to iterate over all objects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#442">[ date ]</a>
              <a href="thread.html#442">[ thread ]</a>
              <a href="subject.html#442">[ subject ]</a>
              <a href="author.html#442">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi everyone,

while working on Lightspark (an open source flash player implementation)
I needed a way to keep track of all allocated objects. I though about
integrating with jemalloc and I have wrote a few patches that makes it
possible to iterate over all the regions allocated in a specified arena.

Please note that the patches do not solve the whole problem of iterating
over every object allocated by jemalloc, but only the smaller one of
iterating over objects allocated in an arena. tcache and huge regions
are not handled. Despite the limitations I think this is sufficient for
my purposes and I would like to share my work, hoping it might be
included upstream. This patch set, although limited, may be the base for
a full blown solution.

The last patch includes a simple test for the functionality. Still I
don't know how to integrate it in the build system since it requires
access to internal APIs only available in the statically linked version
of the library, while other test cases seems to link to the dynamic
version of it.

Regards,
Alessandro Pignotti

-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0001-Add-a-configuration-option-to-enable-iteration-over-.patch
Type: text/x-patch
Size: 2191 bytes
Desc: not available
URL: &lt;<A HREF="http://www.canonware.com/pipermail/jemalloc-discuss/attachments/20120820/6b5326ad/attachment.bin">http://www.canonware.com/pipermail/jemalloc-discuss/attachments/20120820/6b5326ad/attachment.bin</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0002-Keep-track-of-all-allocated-chunks.patch
Type: text/x-patch
Size: 2506 bytes
Desc: not available
URL: &lt;<A HREF="http://www.canonware.com/pipermail/jemalloc-discuss/attachments/20120820/6b5326ad/attachment-0001.bin">http://www.canonware.com/pipermail/jemalloc-discuss/attachments/20120820/6b5326ad/attachment-0001.bin</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0003-Add-a-method-to-iterate-over-objects-allocated-in-an.patch
Type: text/x-patch
Size: 2859 bytes
Desc: not available
URL: &lt;<A HREF="http://www.canonware.com/pipermail/jemalloc-discuss/attachments/20120820/6b5326ad/attachment-0002.bin">http://www.canonware.com/pipermail/jemalloc-discuss/attachments/20120820/6b5326ad/attachment-0002.bin</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0004-Add-test-for-iterate-regions.patch
Type: text/x-patch
Size: 3344 bytes
Desc: not available
URL: &lt;<A HREF="http://www.canonware.com/pipermail/jemalloc-discuss/attachments/20120820/6b5326ad/attachment-0003.bin">http://www.canonware.com/pipermail/jemalloc-discuss/attachments/20120820/6b5326ad/attachment-0003.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000441.html">hint on debugging what seems to be a deadlock
</A></li>
	<LI>Next message: <A HREF="000443.html">Need help with patch allowing to iterate over all objects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#442">[ date ]</a>
              <a href="thread.html#442">[ thread ]</a>
              <a href="subject.html#442">[ subject ]</a>
              <a href="author.html#442">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.canonware.com/mailman/listinfo/jemalloc-discuss">More information about the jemalloc-discuss
mailing list</a><br>
</body></html>
