<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Need Help in porting Jemalloc.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jemalloc-discuss%40canonware.com?Subject=Re%3A%20Need%20Help%20in%20porting%20Jemalloc.&In-Reply-To=%3C951185CE-6B97-4601-9CD1-55F4E6DED780%40canonware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001247.html">
   <LINK REL="Next"  HREF="001249.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Need Help in porting Jemalloc.</H1>
    <B>Jason Evans</B> 
    <A HREF="mailto:jemalloc-discuss%40canonware.com?Subject=Re%3A%20Need%20Help%20in%20porting%20Jemalloc.&In-Reply-To=%3C951185CE-6B97-4601-9CD1-55F4E6DED780%40canonware.com%3E"
       TITLE="Need Help in porting Jemalloc.">jasone at canonware.com
       </A><BR>
    <I>Tue Jan 19 12:25:33 PST 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="001247.html">Need Help in porting Jemalloc.
</A></li>
        <LI>Next message: <A HREF="001249.html">jemalloc hooks clarifications
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1248">[ date ]</a>
              <a href="thread.html#1248">[ thread ]</a>
              <a href="subject.html#1248">[ subject ]</a>
              <a href="author.html#1248">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> On Jan 18, 2016, at 8:35 PM, RajaKishore Sahu &lt;<A HREF="http://www.canonware.com/mailman/listinfo/jemalloc-discuss">raju.sahu at gmail.com</A>&gt; wrote:
</I>&gt;<i> I am trying to port Jemalloc to a embedded environment where we have only 40 MB of memory for a subsystem.
</I>&gt;<i> 
</I>&gt;<i> While porting I found that in start up it is consuming almost 38 MB of memory with arena size of 1MB. We spawn around 70 threads in the start up. So we are only 2 MB left for that subsystem. While the system is in run definitely it will ask for more memory, in that case how we are going to satisfy the memory needed by Jemalloc?
</I>&gt;<i> 
</I>&gt;<i> Current allocator consumes around 20 - 22 MB of memory and remaining is used for the system to run.
</I>
It sounds to me like you have jemalloc configured to create numerous arenas.  You need to drop the chunk size (256 KiB works fine), and/or decrease the number of arenas (one will work fine unless your app does a lot of large allocation).

Jason
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001247.html">Need Help in porting Jemalloc.
</A></li>
	<LI>Next message: <A HREF="001249.html">jemalloc hooks clarifications
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1248">[ date ]</a>
              <a href="thread.html#1248">[ thread ]</a>
              <a href="subject.html#1248">[ subject ]</a>
              <a href="author.html#1248">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.canonware.com/mailman/listinfo/jemalloc-discuss">More information about the jemalloc-discuss
mailing list</a><br>
</body></html>
