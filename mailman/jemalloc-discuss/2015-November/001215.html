<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Configuration Script for Windows
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jemalloc-discuss%40canonware.com?Subject=Re%3A%20Configuration%20Script%20for%20Windows&In-Reply-To=%3CCALcfDgAcf_pHR12SH%3D_mQC0C8Kh0FjfXV6UbAJD7fPQQ2kwEQw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001214.html">
   <LINK REL="Next"  HREF="001216.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Configuration Script for Windows</H1>
    <B>Jos Vernon</B> 
    <A HREF="mailto:jemalloc-discuss%40canonware.com?Subject=Re%3A%20Configuration%20Script%20for%20Windows&In-Reply-To=%3CCALcfDgAcf_pHR12SH%3D_mQC0C8Kh0FjfXV6UbAJD7fPQQ2kwEQw%40mail.gmail.com%3E"
       TITLE="Configuration Script for Windows">jv at websupergoo.com
       </A><BR>
    <I>Thu Nov 19 02:08:05 PST 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="001214.html">[PATCH] Call malloc_tsd_boot0 from malloc_init_hard_recursible
</A></li>
        <LI>Next message: <A HREF="001216.html">jemalloc hooks clarifications
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1215">[ date ]</a>
              <a href="thread.html#1215">[ thread ]</a>
              <a href="subject.html#1215">[ subject ]</a>
              <a href="author.html#1215">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

I've been using the GitHub shines77/jemalloc-win32 for a while -  that uses
jemalloc 3.6.0.

However recently I've hit problems relating to leaks in highly threaded
environments. I know these are jemalloc related because if I swap out
jemalloc for a different memory manager then they go away.

So it would seem to me that the first thing to do is to upgrade to 4.0.4 to
see if the issue is resolved. However I am having some problem getting this
to work under MSVC.

I can see that this is supposed to work because I can see MSVC bits in the
config code. However there are lots of questions about this and a notable
dearth of people who have been successful in this area. That includes me
after my first day. :-(

The MSVC bit is easy. It's getting the config to generate the right bits
that is difficult.

I'm using cygwin. I've put the Visual Studio 2012 environment variables
into my shell so I can use MSVC CL and then I've done an ./autogen.sl
CC=CL.

This seems to work more or less ok. The results look feasible,.But then I'm
missing important bits like sensible values in size_classes.h.

I would love any pointers here. I'm pretty hot on VC++ so once I get the
config going it will be fine. I am sure that will also be useful for other
people who want to do similar things.

Jos

----------------------------------------------------------------------
jos vernon
<A HREF="http://www.websupergoo.com/">http://www.websupergoo.com/</A>
.NET Image Components &amp; Consultancy
----------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://jemalloc.net/mailman/jemalloc-discuss/attachments/20151119/496e1e2a/attachment.html">http://jemalloc.net/mailman/jemalloc-discuss/attachments/20151119/496e1e2a/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001214.html">[PATCH] Call malloc_tsd_boot0 from malloc_init_hard_recursible
</A></li>
	<LI>Next message: <A HREF="001216.html">jemalloc hooks clarifications
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1215">[ date ]</a>
              <a href="thread.html#1215">[ thread ]</a>
              <a href="subject.html#1215">[ subject ]</a>
              <a href="author.html#1215">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.canonware.com/mailman/listinfo/jemalloc-discuss">More information about the jemalloc-discuss
mailing list</a><br>
</body></html>
