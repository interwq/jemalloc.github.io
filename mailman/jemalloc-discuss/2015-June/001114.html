<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> interpretation of malloc_stats_print() output
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jemalloc-discuss%40canonware.com?Subject=Re%3A%20interpretation%20of%20malloc_stats_print%28%29%20output&In-Reply-To=%3CEDC505415B5EF74C80596BD24619C1032C407EDA%40xmb-rcd-x07.cisco.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001113.html">
   <LINK REL="Next"  HREF="001115.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>interpretation of malloc_stats_print() output</H1>
    <B>Mayank Kumar (mayankum)</B> 
    <A HREF="mailto:jemalloc-discuss%40canonware.com?Subject=Re%3A%20interpretation%20of%20malloc_stats_print%28%29%20output&In-Reply-To=%3CEDC505415B5EF74C80596BD24619C1032C407EDA%40xmb-rcd-x07.cisco.com%3E"
       TITLE="interpretation of malloc_stats_print() output">mayankum at cisco.com
       </A><BR>
    <I>Tue Jun  2 23:42:11 PDT 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="001113.html">interpretation of malloc_stats_print() output
</A></li>
        <LI>Next message: <A HREF="001115.html">Bug in chunk allocation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1114">[ date ]</a>
              <a href="thread.html#1114">[ thread ]</a>
              <a href="subject.html#1114">[ subject ]</a>
              <a href="author.html#1114">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Jason.

From: Jason Evans [mailto:<A HREF="http://www.canonware.com/mailman/listinfo/jemalloc-discuss">jasone at canonware.com</A>]
Sent: Tuesday, June 02, 2015 10:10 PM
To: Mayank Kumar (mayankum)
Cc: <A HREF="http://www.canonware.com/mailman/listinfo/jemalloc-discuss">jemalloc-discuss at canonware.com</A>
Subject: Re: interpretation of malloc_stats_print() output

On Jun 2, 2015, at 11:25 AM, Mayank Kumar (mayankum) &lt;<A HREF="http://www.canonware.com/mailman/listinfo/jemalloc-discuss">mayankum at cisco.com</A>&lt;mailto:<A HREF="http://www.canonware.com/mailman/listinfo/jemalloc-discuss">mayankum at cisco.com</A>&gt;&gt; wrote:
I am trying to match output from malloc_stats with output from top and also trying to figure out total process virtual memory usage from stats.

What fields in the stats should be added to get the total virtual memory for my process ?

For the version of jemalloc you're using, virtual memory can be computed by multiplying the number of chunks times the chunk size -- 396 MiB in this case.

Also is this link an accurate measurement of fragmentation for my process?
<A HREF="http://www.canonware.com/pipermail/jemalloc-discuss/2014-April/000766.html">http://www.canonware.com/pipermail/jemalloc-discuss/2014-April/000766.html</A>

from the link it seems active should be less than allocated, but I see otherwise. Is there a documentation somewhere to decipher this interesting output from jemalloc stats ?

The jemalloc manual documents all the statistics:

                <A HREF="http://www.canonware.com/download/jemalloc/jemalloc-latest/doc/jemalloc.html">http://www.canonware.com/download/jemalloc/jemalloc-latest/doc/jemalloc.html</A>



CPUs: 2
Arenas: 8
Pointer size: 4
Quantum size: 16
Page size: 4096
Min active:dirty page ratio per arena: 8:1
Maximum thread-cached size class: 32768
Chunk size: &gt;&gt;&gt;4194304&lt;&lt;&lt; (2^22)
Allocated: 251363184, active: 270594048, mapped: 415236096
Current active ceiling: 1488977920
chunks: nchunks   highchunks    curchunks
            100           99           &gt;&gt;&gt;99&lt;&lt;&lt;
huge: nmalloc      ndalloc    allocated
            0            0            0
 [...]

Jason
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://www.canonware.com/pipermail/jemalloc-discuss/attachments/20150603/fcbc3a2e/attachment.html">http://www.canonware.com/pipermail/jemalloc-discuss/attachments/20150603/fcbc3a2e/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001113.html">interpretation of malloc_stats_print() output
</A></li>
	<LI>Next message: <A HREF="001115.html">Bug in chunk allocation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1114">[ date ]</a>
              <a href="thread.html#1114">[ thread ]</a>
              <a href="subject.html#1114">[ subject ]</a>
              <a href="author.html#1114">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.canonware.com/mailman/listinfo/jemalloc-discuss">More information about the jemalloc-discuss
mailing list</a><br>
</body></html>
