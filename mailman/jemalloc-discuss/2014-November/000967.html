<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Huge page support would be useful in JEMalloc
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jemalloc-discuss%40canonware.com?Subject=Re%3A%20Huge%20page%20support%20would%20be%20useful%20in%20JEMalloc&In-Reply-To=%3CAM3PR02MB0568D48ABCECBBC9946A4516D8730%40AM3PR02MB0568.eurprd02.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000966.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Huge page support would be useful in JEMalloc</H1>
    <B>Kenneth Steele</B> 
    <A HREF="mailto:jemalloc-discuss%40canonware.com?Subject=Re%3A%20Huge%20page%20support%20would%20be%20useful%20in%20JEMalloc&In-Reply-To=%3CAM3PR02MB0568D48ABCECBBC9946A4516D8730%40AM3PR02MB0568.eurprd02.prod.outlook.com%3E"
       TITLE="Huge page support would be useful in JEMalloc">ken at ezchip.com
       </A><BR>
    <I>Tue Nov 25 09:51:40 PST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="000966.html">[PATCH] Fix test breakage on 32-bit systems
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#967">[ date ]</a>
              <a href="thread.html#967">[ thread ]</a>
              <a href="subject.html#967">[ subject ]</a>
              <a href="author.html#967">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I would like to be able to use Linux Huge pages in JEMalloc. It could have significant benefit for some programs performance.

The case I tested is running Suricata (<A HREF="http://suricata-ids.org/">http://suricata-ids.org/</A>) on the Tile-Gx architecture (<A HREF="http://www.tilera.com/products/processors/TILE-Gx_Family">http://www.tilera.com/products/processors/TILE-Gx_Family</A>), but it should be similar on other architectures. The glibc allocator on Linux allows using Huge pages with malloc() by running the program with &quot;hugectl -heap&quot;. I have measured performance for two test cases under three conditions:


1)      Glibc 2.12, no huge pages (baseline)

2)      Glibc2 2.12, with 16MB huge pages

3)      JEMalloc, no huge pages

JEMalloc  gives a 4.7% increase for one test case and 5.6% increase for the other over baseline.
Hugepages gives a 27.2% and 25.3% increase over baseline for the same two test cases.

So, JEMalloc is better than glibc malloc, but much worse than glibc malloc with hugepages.

Ideally, JEMalloc with Huge pages would be the best.

Thanks,
-Ken
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://jemalloc.net/mailman/jemalloc-discuss/attachments/20141125/eafc2004/attachment.html">http://jemalloc.net/mailman/jemalloc-discuss/attachments/20141125/eafc2004/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000966.html">[PATCH] Fix test breakage on 32-bit systems
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#967">[ date ]</a>
              <a href="thread.html#967">[ thread ]</a>
              <a href="subject.html#967">[ subject ]</a>
              <a href="author.html#967">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.canonware.com/mailman/listinfo/jemalloc-discuss">More information about the jemalloc-discuss
mailing list</a><br>
</body></html>
