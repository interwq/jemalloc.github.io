<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;style&nbsp;type=&quot;text/css&quot;&nbsp;style=&quot;display:none;&quot;&gt;&lt;!--&nbsp;P&nbsp;{margin-top:0;margin-bottom:0;}&nbsp;--&gt;&lt;/style&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;dir=&quot;ltr&quot;&gt;<br>
&lt;div&nbsp;id=&quot;divtagdefaultwrapper&quot;&nbsp;style=&quot;font-size:12pt;color:#000000;background-color:#FFFFFF;font-family:Calibri,Arial,Helvetica,sans-serif;&quot;&gt;<br>
&lt;p&gt;Hi,&nbsp;&lt;/p&gt;<br>
&lt;p&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&gt;I&nbsp;am&nbsp;studying&nbsp;jemalloc&nbsp;design&nbsp;so&nbsp;that&nbsp;this&nbsp;design&nbsp;can&nbsp;be&nbsp;used&nbsp;in&nbsp;server&nbsp;based&nbsp;application.&nbsp;Please&nbsp;provide&nbsp;some&nbsp;initial&nbsp;references&nbsp;related&nbsp;to&nbsp;metadata&nbsp;management&nbsp;of&nbsp;each&nbsp;memory&nbsp;allocation&nbsp;of&nbsp;any&nbsp;size&nbsp;in&nbsp;jemalloc.&lt;/p&gt;<br>
&lt;p&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&gt;1.&nbsp;&nbsp;Is&nbsp;it&nbsp;possible&nbsp;to&nbsp;move&nbsp;the&nbsp;metadata&nbsp;allocation&nbsp;(Internal&nbsp;data&nbsp;structures&nbsp;for&nbsp;each&nbsp;arena&nbsp;a1,&nbsp;a2&nbsp;....&nbsp;narenas)&nbsp;from&nbsp;single&nbsp;arena&nbsp;&quot;a0&quot;?&nbsp;&lt;/p&gt;<br>
&lt;p&gt;Example:&nbsp;&lt;/p&gt;<br>
&lt;p&gt;I&nbsp;have&nbsp;two&nbsp;memory&nbsp;chunks&nbsp;(A&nbsp;&amp;&nbsp;B&nbsp;)or&nbsp;blocks&nbsp;of&nbsp;size&nbsp;&nbsp;1GB&nbsp;each.&nbsp;One&nbsp;memory&nbsp;chunk&nbsp;A&nbsp;is&nbsp;used&nbsp;to&nbsp;hold&nbsp;metadata&nbsp;information&nbsp;(excluding&nbsp;chunk&nbsp;headers)&nbsp;for&nbsp;each&nbsp;memory&nbsp;request&nbsp;done&nbsp;from&nbsp;memory&nbsp;block&nbsp;B.&nbsp;If&nbsp;memory&nbsp;chunk&nbsp;A&nbsp;cant&nbsp;be&nbsp;able&nbsp;to&nbsp;hold&nbsp;more&nbsp;metadata&nbsp;then&nbsp;&nbsp;a<br>
&nbsp;new&nbsp;memory&nbsp;block&nbsp;of&nbsp;same&nbsp;size&nbsp;1&nbsp;GB&nbsp;&nbsp;is&nbsp;allocated&nbsp;(A1,&nbsp;A2........&nbsp;An')&nbsp;and&nbsp;same&nbsp;is&nbsp;for&nbsp;B&nbsp;which&nbsp;will&nbsp;&nbsp;&lt;/p&gt;<br>
&lt;p&gt;Whether&nbsp;this&nbsp;strategy&nbsp;will&nbsp;work,&nbsp;if&nbsp;arena&nbsp;a0&nbsp;will&nbsp;be&nbsp;used&nbsp;to&nbsp;hold&nbsp;metadata&nbsp;requests&nbsp;and&nbsp;all&nbsp;the&nbsp;other&nbsp;to&nbsp;serve&nbsp;memory&nbsp;requests.&nbsp;I&nbsp;am&nbsp;also&nbsp;finding&nbsp;out&nbsp;another&nbsp;solution&nbsp;but&nbsp;still&nbsp;not&nbsp;sure&nbsp;whether&nbsp;it&nbsp;works&nbsp;or&nbsp;not,&nbsp;Please&nbsp;see&nbsp;some&nbsp;description<br>
&lt;/p&gt;<br>
&lt;p&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&gt;For&nbsp;every&nbsp;Arena&nbsp;allocate&nbsp;two&nbsp;different&nbsp;chunks&nbsp;one&nbsp;to&nbsp;hold&nbsp;metadata&nbsp;information&nbsp;of&nbsp;small&nbsp;size&nbsp;requests&nbsp;and&nbsp;large&nbsp;size&nbsp;requests&nbsp;are&nbsp;already&nbsp;maintained&nbsp;in&nbsp;tree.&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&lt;p&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&gt;2.&nbsp;&nbsp;Please&nbsp;provide&nbsp;some&nbsp;more&nbsp;details&nbsp;or&nbsp;references&nbsp;related&nbsp;to&nbsp;size&nbsp;class&nbsp;implementation,&nbsp;If&nbsp;&nbsp;user&nbsp;want&nbsp;to&nbsp;customize&nbsp;the&nbsp;size&nbsp;class&nbsp;granularity&nbsp;to&nbsp;1MB,&nbsp;2MB&nbsp;instead&nbsp;of&nbsp;bytes,&nbsp;KB's&nbsp;what&nbsp;other&nbsp;factors&nbsp;need&nbsp;to&nbsp;consider&nbsp;during&nbsp;customization.&lt;/p&gt;<br>
&lt;p&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&gt;3.&nbsp;Is&nbsp;it&nbsp;possible&nbsp;to&nbsp;maintain&nbsp;chunk&nbsp;header&nbsp;separately&nbsp;instead&nbsp;of&nbsp;start&nbsp;of&nbsp;chunk?.&nbsp;&nbsp;&lt;/p&gt;<br>
&lt;p&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&gt;Please&nbsp;correct&nbsp;me&nbsp;if&nbsp;there&nbsp;is&nbsp;any&nbsp;gap&nbsp;in&nbsp;understanding&nbsp;the&nbsp;design&nbsp;of&nbsp;jemalloc&nbsp;and&nbsp;feasibility&nbsp;to&nbsp;club&nbsp;jemalloc&nbsp;with&nbsp;server&nbsp;application.&lt;/p&gt;<br>
&lt;p&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;div&nbsp;id=&quot;Signature&quot;&gt;<br>
&lt;div&nbsp;class=&quot;BodyFragment&quot;&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;<br>
&lt;div&nbsp;class=&quot;PlainText&quot;&gt;Thanks&nbsp;&amp;&nbsp;Best&nbsp;Regards,&lt;br&gt;<br>
Anshul&nbsp;Kundra&lt;/div&gt;<br>
&lt;/font&gt;&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;span&nbsp;style=&quot;FONT-FAMILY:&nbsp;'Arial','sans-serif';&nbsp;COLOR:&nbsp;gray;&nbsp;FONT-SIZE:&nbsp;7.5pt;&nbsp;mso-fareast-font-family:&nbsp;'Times&nbsp;New&nbsp;Roman'&quot;&gt;<br>
&lt;P&nbsp;style=&quot;MARGIN:&nbsp;0in&nbsp;0in&nbsp;0pt&quot;&nbsp;class=MsoNormal&gt;&lt;br&gt;&lt;br&gt;&lt;font&nbsp;style=&quot;FONT-FAMILY:&nbsp;'Arial','sans-serif';&nbsp;COLOR:&nbsp;gray;&nbsp;FONT-SIZE:&nbsp;9px&quot;&gt;::DISCLAIMER::&lt;br&gt;----------------------------------------------------------------------------------------------------------------------------------------------------&lt;/font&gt;&lt;/P&gt;<br>
&lt;P&nbsp;style=&quot;MARGIN:&nbsp;0in&nbsp;0in&nbsp;0pt&quot;&nbsp;class=MsoNormal&gt;&lt;font&nbsp;style=&quot;FONT-FAMILY:&nbsp;'Arial','sans-serif';&nbsp;COLOR:&nbsp;gray;&nbsp;FONT-SIZE:&nbsp;11px&quot;&gt;The&nbsp;contents&nbsp;of&nbsp;this&nbsp;e-mail&nbsp;and&nbsp;any&nbsp;attachment(s)&nbsp;are&nbsp;confidential&nbsp;and&nbsp;intended&nbsp;for&nbsp;the&nbsp;named&nbsp;recipient(s)&nbsp;only.&lt;br&gt;E-mail&nbsp;transmission&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;secure&nbsp;or&nbsp;error-free&nbsp;as&nbsp;information&nbsp;could&nbsp;be&nbsp;intercepted,&nbsp;corrupted,&nbsp;&lt;br&gt;lost,&nbsp;destroyed,&nbsp;arrive&nbsp;late&nbsp;or&nbsp;incomplete,&nbsp;or&nbsp;may&nbsp;contain&nbsp;viruses&nbsp;in&nbsp;transmission.&nbsp;The&nbsp;e&nbsp;mail&nbsp;and&nbsp;its&nbsp;contents&nbsp;&lt;br&gt;(with&nbsp;or&nbsp;without&nbsp;referred&nbsp;errors)&nbsp;shall&nbsp;therefore&nbsp;not&nbsp;attach&nbsp;any&nbsp;liability&nbsp;on&nbsp;the&nbsp;originator&nbsp;or&nbsp;HCL&nbsp;or&nbsp;its&nbsp;affiliates.&nbsp;&lt;br&gt;Views&nbsp;or&nbsp;opinions,&nbsp;if&nbsp;any,&nbsp;presented&nbsp;in&nbsp;this&nbsp;email&nbsp;are&nbsp;solely&nbsp;those&nbsp;of&nbsp;the&nbsp;author&nbsp;and&nbsp;may&nbsp;not&nbsp;necessarily&nbsp;reflect&nbsp;the&nbsp;&lt;br&gt;views&nbsp;or&nbsp;opinions&nbsp;of&nbsp;HCL&nbsp;or&nbsp;its&nbsp;affiliates.&nbsp;Any&nbsp;form&nbsp;of&nbsp;reproduction,&nbsp;dissemination,&nbsp;copying,&nbsp;disclosure,&nbsp;modification,&nbsp;&lt;br&gt;distribution&nbsp;and&nbsp;/&nbsp;or&nbsp;publication&nbsp;of&nbsp;this&nbsp;message&nbsp;without&nbsp;the&nbsp;prior&nbsp;written&nbsp;consent&nbsp;of&nbsp;authorized&nbsp;representative&nbsp;of&nbsp;&lt;br&gt;HCL&nbsp;is&nbsp;strictly&nbsp;prohibited.&nbsp;If&nbsp;you&nbsp;have&nbsp;received&nbsp;this&nbsp;email&nbsp;in&nbsp;error&nbsp;please&nbsp;delete&nbsp;it&nbsp;and&nbsp;notify&nbsp;the&nbsp;sender&nbsp;immediately.&nbsp;&lt;br&gt;Before&nbsp;opening&nbsp;any&nbsp;email&nbsp;and/or&nbsp;attachments,&nbsp;please&nbsp;check&nbsp;them&nbsp;for&nbsp;viruses&nbsp;and&nbsp;other&nbsp;defects.&lt;/font&gt;&lt;/P&gt;<br>
&lt;P&nbsp;style=&quot;MARGIN:&nbsp;0in&nbsp;0in&nbsp;0pt&quot;&nbsp;class=MsoNormal&gt;&lt;font&nbsp;style=&quot;FONT-FAMILY:&nbsp;'Arial','sans-serif';&nbsp;COLOR:&nbsp;gray;&nbsp;FONT-SIZE:&nbsp;11px&quot;&gt;----------------------------------------------------------------------------------------------------------------------------------------------------&lt;/font&gt;&lt;/span&gt;&lt;/P&gt;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
