<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi &lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;started&nbsp;using&nbsp;jemalloc&nbsp;to&nbsp;profile&nbsp;one&nbsp;Java&nbsp;program&nbsp;and&nbsp;I&nbsp;had&nbsp;some&nbsp;difficulty&nbsp;getting&nbsp;it&nbsp;working.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;sample&nbsp;Java&nbsp;program&nbsp;is&nbsp;very&nbsp;simple.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;int[][]&nbsp;array&nbsp;=&nbsp;new&nbsp;int[1&nbsp;&lt;&lt;&nbsp;20][];&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;array.length;&nbsp;i++)&nbsp;{&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;array[i]&nbsp;=&nbsp;new&nbsp;int[1&nbsp;&lt;&lt;&nbsp;10];&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;}&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;it&nbsp;does&nbsp;is&nbsp;to&nbsp;create&nbsp;an&nbsp;higher&nbsp;order&nbsp;array&nbsp;of&nbsp;size&nbsp;1M,&nbsp;and&nbsp;for&nbsp;each&nbsp;slot,&nbsp;create&nbsp;an&nbsp;integer&nbsp;array&nbsp;of&nbsp;size&nbsp;1K.&nbsp;So&nbsp;in&nbsp;total&nbsp;it&nbsp;should&nbsp;allocate&nbsp;1M&nbsp;*&nbsp;1K&nbsp;*&nbsp;4&nbsp;byte&nbsp;=&nbsp;4G&nbsp;memory.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;profiled&nbsp;the&nbsp;Java&nbsp;with&nbsp;jemalloc&nbsp;with&nbsp;the&nbsp;following&nbsp;options,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;export&nbsp;MALLOC_CONF=&quot;prof:true,lg_prof_interval:30,lg_prof_sample:10,prof_prefix:/tmp/jeprof.out&quot;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;understanding&nbsp;is&nbsp;jemalloc&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;dump&nbsp;a&nbsp;file&nbsp;each&nbsp;time&nbsp;1G&nbsp;is&nbsp;allocated,&nbsp;at&nbsp;a&nbsp;sampling&nbsp;frequency&nbsp;of&nbsp;1K&nbsp;allocation.&nbsp;However,&nbsp;I&nbsp;never&nbsp;see&nbsp;any&nbsp;dump&nbsp;file&nbsp;automatically&nbsp;generated.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;jemalloc&nbsp;should&nbsp;be&nbsp;installed&nbsp;correctly&nbsp;b/c&nbsp;I&nbsp;can&nbsp;see&nbsp;memory&nbsp;dump&nbsp;file&nbsp;generated&nbsp;with&nbsp;the&nbsp;following&nbsp;option.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;export&nbsp;MALLOC_CONF=&quot;prof:true,prof_final:true,prof_prefix:/tmp/jeprof.out&quot;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Is&nbsp;there&nbsp;anything&nbsp;I&nbsp;am&nbsp;missing&nbsp;or&nbsp;misusing&nbsp;jemalloc?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Chen&lt;/div&gt;<br>
&lt;/div&gt;<br>

</tt>
