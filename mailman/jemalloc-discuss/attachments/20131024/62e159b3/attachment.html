<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hi,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;using&nbsp;jemalloc-3.4.0&nbsp;on&nbsp;Centos&nbsp;6.3&lt;/div&gt;&lt;div&gt;When&nbsp;my&nbsp;SEGV&nbsp;signal&nbsp;handler&nbsp;tried&nbsp;to&nbsp;dump&nbsp;call&nbsp;stacks,&nbsp;hang&nbsp;occurred&nbsp;as&nbsp;following.&lt;/div&gt;&lt;div&gt;I&nbsp;don&#39;t&nbsp;know&nbsp;why&nbsp;libc&#39;s&nbsp;fork&nbsp;called&nbsp;jemalloc_prefork&nbsp;even&nbsp;if&nbsp;I&nbsp;didn&#39;t&nbsp;set&nbsp;LD_PRELOAD.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;#0&nbsp; 0x000000351d60d654&nbsp;in&nbsp;__lll_lock_wait&nbsp;()&nbsp;from&nbsp;/lib64/libpthread.so.0&lt;/div&gt;&lt;div&gt;#1&nbsp; 0x000000351d608f4a&nbsp;in&nbsp;_L_lock_1034&nbsp;()&nbsp;from&nbsp;/lib64/libpthread.so.0&lt;/div&gt;&lt;div&gt;#2&nbsp; 0x000000351d608e0c&nbsp;in&nbsp;pthread_mutex_lock&nbsp;()&nbsp;from&nbsp;/lib64/libpthread.so.0&lt;/div&gt;<br>
&lt;div&gt;#3&nbsp; 0x00002b59a8055d6d&nbsp;in&nbsp;malloc_mutex_lock&nbsp;(mutex=0x2b59a84a4320)&nbsp;at&nbsp;include/jemalloc/internal/mutex.h:77&lt;/div&gt;&lt;div&gt;#4&nbsp; malloc_mutex_prefork&nbsp;(mutex=0x2b59a84a4320)&nbsp;at&nbsp;src/mutex.c:109&lt;/div&gt;&lt;div&gt;#5&nbsp; 0x00002b59a8044c32&nbsp;in&nbsp;arena_prefork&nbsp;(arena=0x2b59a84a3d40)&nbsp;at&nbsp;src/arena.c:2344&lt;/div&gt;<br>
&lt;div&gt;#6&nbsp; 0x00002b59a803f555&nbsp;in&nbsp;jemalloc_prefork&nbsp;()&nbsp;at&nbsp;src/jemalloc.c:1760&lt;/div&gt;&lt;div&gt;#7&nbsp; 0x000000351ca9a2a6&nbsp;in&nbsp;fork&nbsp;()&nbsp;from&nbsp;/lib64/libc.so.6&lt;/div&gt;&lt;div&gt;#8&nbsp; 0x000000351ca6200d&nbsp;in&nbsp;_IO_proc_open@@GLIBC_2.2.5&nbsp;()&nbsp;from&nbsp;/lib64/libc.so.6&lt;/div&gt;<br>
&lt;div&gt;#9&nbsp; 0x000000351ca62269&nbsp;in&nbsp;popen@@GLIBC_2.2.5&nbsp;()&nbsp;from&nbsp;/lib64/libc.so.6&lt;/div&gt;&lt;div&gt;#10&nbsp;0x00002b59a71bc1f9&nbsp;in&nbsp;backtrace_lineinfo&nbsp;(number=1,&nbsp;address=&lt;value&nbsp;optimized&nbsp;out&gt;,&nbsp;symbol=0x2b61f4000918&nbsp;&quot;/usr/lib64/libnc.so.2&nbsp;[0x2b59a71bc3b1]&quot;)&nbsp;at&nbsp;cfs_apix.c:363&lt;/div&gt;<br>
&lt;div&gt;#11&nbsp;0x00002b59a71bc3ff&nbsp;in&nbsp;nc_dump_stack&nbsp;(sig=&lt;value&nbsp;optimized&nbsp;out&gt;)&nbsp;at&nbsp;cfs_apix.c:423&lt;/div&gt;&lt;div&gt;#12&nbsp;&lt;signal&nbsp;handler&nbsp;called&gt;&lt;/div&gt;&lt;div&gt;#13&nbsp;0x00002b59a8047332&nbsp;in&nbsp;arena_dalloc_bin_locked&nbsp;(arena=0x2b59a84a3d40,&nbsp;chunk=0x2b61ef000000,&nbsp;ptr=&lt;value&nbsp;optimized&nbsp;out&gt;,&nbsp;mapelm=&lt;value&nbsp;optimized&nbsp;out&gt;)&nbsp;at&nbsp;src/arena.c:1717&lt;/div&gt;<br>
&lt;div&gt;#14&nbsp;0x00002b59a805fba4&nbsp;in&nbsp;tcache_bin_flush_small&nbsp;(tbin=0x2b61ef107128,&nbsp;binind=8,&nbsp;rem=9,&nbsp;tcache=0x2b61ef107000)&nbsp;at&nbsp;src/tcache.c:127&lt;/div&gt;&lt;div&gt;#15&nbsp;0x00002b59a805fcd4&nbsp;in&nbsp;tcache_event_hard&nbsp;(tcache=0x80)&nbsp;at&nbsp;src/tcache.c:39&lt;/div&gt;<br>
&lt;div&gt;#16&nbsp;0x00002b59a80428d9&nbsp;in&nbsp;tcache_event&nbsp;(ptr=0x2b61efd26dc0)&nbsp;at&nbsp;include/jemalloc/internal/tcache.h:271&lt;/div&gt;&lt;div&gt;#17&nbsp;tcache_dalloc_small&nbsp;(ptr=0x2b61efd26dc0)&nbsp;at&nbsp;include/jemalloc/internal/tcache.h:408&lt;/div&gt;&lt;div&gt;#18&nbsp;arena_dalloc&nbsp;(ptr=0x2b61efd26dc0)&nbsp;at&nbsp;include/jemalloc/internal/arena.h:1003&lt;/div&gt;<br>
&lt;div&gt;#19&nbsp;idallocx&nbsp;(ptr=0x2b61efd26dc0)&nbsp;at&nbsp;include/jemalloc/internal/jemalloc_internal.h:913&lt;/div&gt;&lt;div&gt;#20&nbsp;iqallocx&nbsp;(ptr=0x2b61efd26dc0)&nbsp;at&nbsp;include/jemalloc/internal/jemalloc_internal.h:932&lt;/div&gt;&lt;div&gt;#21&nbsp;iqalloc&nbsp;(ptr=0x2b61efd26dc0)&nbsp;at&nbsp;include/jemalloc/internal/jemalloc_internal.h:939&lt;/div&gt;<br>
&lt;div&gt;#22&nbsp;jefree&nbsp;(ptr=0x2b61efd26dc0)&nbsp;at&nbsp;src/jemalloc.c:1272&lt;/div&gt;&lt;div&gt;#23&nbsp;0x00002b59a71c958b&nbsp;in&nbsp;__nc_free&nbsp;(p=0x2b61efd26dd0,&nbsp;file=&lt;value&nbsp;optimized&nbsp;out&gt;,&nbsp;lno=&lt;value&nbsp;optimized&nbsp;out&gt;)&nbsp;at&nbsp;util.c:1916&lt;/div&gt;&lt;div&gt;#24&nbsp;0x00002b59a71cb975&nbsp;in&nbsp;tlcq_dequeue&nbsp;(q=0x2b59a9ee3210,&nbsp;msec=&lt;value&nbsp;optimized&nbsp;out&gt;)&nbsp;at&nbsp;tlc_queue.c:215&lt;/div&gt;<br>
&lt;div&gt;#25&nbsp;0x00002b59a71c154b&nbsp;in&nbsp;tp_worker&nbsp;(d=&lt;value&nbsp;optimized&nbsp;out&gt;)&nbsp;at&nbsp;threadpool.c:116&lt;/div&gt;&lt;div&gt;#26&nbsp;0x000000351d60683d&nbsp;in&nbsp;start_thread&nbsp;()&nbsp;from&nbsp;/lib64/libpthread.so.0&lt;/div&gt;&lt;div&gt;#27&nbsp;0x000000351cad503d&nbsp;in&nbsp;clone&nbsp;()&nbsp;from&nbsp;/lib64/libc.so.6&lt;/div&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any&nbsp;hint&nbsp;will&nbsp;be&nbsp;highly&nbsp;appreciated.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;----------&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;weon&lt;/div&gt;<br>
&lt;/div&gt;<br>

</tt>
