<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;div&gt;&lt;div&gt;On&nbsp;Jun&nbsp;27,&nbsp;2013,&nbsp;at&nbsp;8:31&nbsp;PM,&nbsp;Thomas&nbsp;R&nbsp;Gissel&nbsp;wrote:&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;&lt;p&gt;&lt;font&nbsp;size=&quot;2&quot;&nbsp;face=&quot;sans-serif&quot;&gt;I&nbsp;apologize&nbsp;for&nbsp;the&nbsp;delinquency&nbsp;of&nbsp;my&nbsp;response.&nbsp;&nbsp;The&nbsp;previously&nbsp;provided&nbsp;stressTest.c&nbsp;does&nbsp;not&nbsp;exhibit&nbsp;the&nbsp;same&nbsp;RSS&nbsp;growth&nbsp;problem&nbsp;as&nbsp;our&nbsp;larger&nbsp;application.&nbsp;&nbsp;&nbsp;As&nbsp;perhaps&nbsp;an&nbsp;interesting&nbsp;data&nbsp;point,&nbsp;running&nbsp;with&nbsp;1&nbsp;arena&nbsp;seems&nbsp;to&nbsp;eliminate&nbsp;or&nbsp;at&nbsp;least&nbsp;mitigate&nbsp;the&nbsp;issue&nbsp;to&nbsp;the&nbsp;point&nbsp;where&nbsp;it&nbsp;is&nbsp;no&nbsp;longer&nbsp;noticeable&nbsp;with&nbsp;our&nbsp;current&nbsp;tests.&nbsp;This&nbsp;seems&nbsp;to&nbsp;indicate&nbsp;internal,&nbsp;across&nbsp;arena,&nbsp;fragmentation,&nbsp;but&nbsp;what&nbsp;is&nbsp;still&nbsp;puzzling&nbsp;is&nbsp;that&nbsp;in&nbsp;the&nbsp;multi-arena&nbsp;configuration&nbsp;the&nbsp;jemalloc&nbsp;stats&nbsp;seem&nbsp;to&nbsp;disconfirm&nbsp;that&nbsp;hypothesis.&nbsp;Specifically,&nbsp;the&nbsp;pattern&nbsp;we&nbsp;see&nbsp;is&nbsp;that&nbsp;after&nbsp;our&nbsp;test&nbsp;has&nbsp;been&nbsp;running&nbsp;for&nbsp;some&nbsp;long&nbsp;period&nbsp;of&nbsp;time,&nbsp;usually&nbsp;several&nbsp;hours,&nbsp;and&nbsp;after&nbsp;our&nbsp;eviction&nbsp;logic&nbsp;has&nbsp;run&nbsp;several&nbsp;eviction&nbsp;cycles,&nbsp;the&nbsp;process&nbsp;begins&nbsp;to&nbsp;and&nbsp;continues&nbsp;to&nbsp;behave&nbsp;in&nbsp;the&nbsp;following&nbsp;way&nbsp;until&nbsp;the&nbsp;test&nbsp;is&nbsp;terminated:&nbsp;jemalloc's&nbsp;mapped&nbsp;statistic&nbsp;and&nbsp;process&nbsp;VmRSS&nbsp;seem&nbsp;to&nbsp;grow&nbsp;in&nbsp;a&nbsp;correlated&nbsp;way&nbsp;while&nbsp;jemalloc's&nbsp;active&nbsp;statistic&nbsp;stays&nbsp;flat.&nbsp;&nbsp;Does&nbsp;this&nbsp;information&nbsp;give&nbsp;you&nbsp;any&nbsp;insights?&nbsp;&nbsp;&lt;/font&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;I&nbsp;can&nbsp;only&nbsp;think&nbsp;of&nbsp;a&nbsp;couple&nbsp;of&nbsp;ways&nbsp;this&nbsp;could&nbsp;happen,&nbsp;barring&nbsp;an&nbsp;outright&nbsp;bug&nbsp;in&nbsp;jemalloc:&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-&nbsp;madvise(2)&nbsp;is&nbsp;failing.&nbsp;&nbsp;You&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;use&nbsp;strace&nbsp;to&nbsp;determine&nbsp;whether&nbsp;this&nbsp;is&nbsp;an&nbsp;issue.&nbsp;&nbsp;The&nbsp;only&nbsp;legitimate&nbsp;reason&nbsp;I&nbsp;can&nbsp;think&nbsp;of&nbsp;for&nbsp;this&nbsp;failure&nbsp;would&nbsp;be&nbsp;an&nbsp;interaction&nbsp;with&nbsp;mlockall(2).&lt;/div&gt;&lt;div&gt;-&nbsp;The&nbsp;application&nbsp;is&nbsp;touching&nbsp;memory&nbsp;that&nbsp;has&nbsp;been&nbsp;freed,&nbsp;after&nbsp;it&nbsp;has&nbsp;been&nbsp;purged&nbsp;via&nbsp;madvise(2).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Jason&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
