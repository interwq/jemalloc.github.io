<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;When&nbsp;compiling &lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;include/jemalloc/internal/atomic.h&lt;/span&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;for&nbsp;Android&nbsp;with&nbsp;clang/llvm&nbsp;compiler&nbsp;and&nbsp;arm64&nbsp;or&nbsp;mips&nbsp;targets,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;JEMALLOC_C11ATOMICS&nbsp;should&nbsp;be&nbsp;defined,&nbsp;but&nbsp;there&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;are&nbsp;type&nbsp;errors&nbsp;in&nbsp;the&nbsp;arguments&nbsp;to&nbsp;function&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#000000&quot;&gt;atomic_compare_exchange_strong &lt;/font&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;and atomic_store.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#000000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#000000&quot;&gt;The&nbsp;following&nbsp;diff&nbsp;will&nbsp;fix&nbsp;the&nbsp;error:&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#000000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;pre&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;diff&nbsp;--git&nbsp;a/include/jemalloc/internal/atomic.h&nbsp;b/include/jemalloc/internal/atomic.h<br>
index&nbsp;522dd2a..a9aad35&nbsp;100644<br>
---&nbsp;a/include/jemalloc/internal/atomic.h<br>
+++&nbsp;b/include/jemalloc/internal/atomic.h<br>
@@&nbsp;-143,15&nbsp;+143,15&nbsp;@@&nbsp;atomic_sub_uint64(uint64_t&nbsp;*p,&nbsp;uint64_t&nbsp;x)<br>
&nbsp;JEMALLOC_INLINE&nbsp;bool<br>
&nbsp;atomic_cas_uint64(uint64_t&nbsp;*p,&nbsp;uint64_t&nbsp;c,&nbsp;uint64_t&nbsp;s)<br>
&nbsp;{<br>
-<br>
-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(!atomic_compare_exchange_strong(p,&nbsp;&amp;c,&nbsp;s));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;volatile&nbsp;atomic_uint_least64_t&nbsp;*a&nbsp;=&nbsp;(volatile&nbsp;atomic_uint_least64_t&nbsp;*)p;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(!atomic_compare_exchange_strong(a,&nbsp;&amp;c,&nbsp;s));<br>
&nbsp;}<br>
&nbsp;<br>
&nbsp;JEMALLOC_INLINE&nbsp;void<br>
&nbsp;atomic_write_uint64(uint64_t&nbsp;*p,&nbsp;uint64_t&nbsp;x)<br>
&nbsp;{<br>
-<br>
-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;atomic_store(p,&nbsp;x);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;volatile&nbsp;atomic_uint_least64_t&nbsp;*a&nbsp;=&nbsp;(volatile&nbsp;atomic_uint_least64_t&nbsp;*)p;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;atomic_store(a,&nbsp;x);<br>
&nbsp;}<br>
&nbsp;#&nbsp;&nbsp;elif&nbsp;(defined(JEMALLOC_ATOMIC9))<br>
&nbsp;JEMALLOC_INLINE&nbsp;uint64_t<br>
@@&nbsp;-367,15&nbsp;+367,15&nbsp;@@&nbsp;atomic_sub_uint32(uint32_t&nbsp;*p,&nbsp;uint32_t&nbsp;x)<br>
&nbsp;JEMALLOC_INLINE&nbsp;bool<br>
&nbsp;atomic_cas_uint32(uint32_t&nbsp;*p,&nbsp;uint32_t&nbsp;c,&nbsp;uint32_t&nbsp;s)<br>
&nbsp;{<br>
-<br>
-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(!atomic_compare_exchange_strong(p,&nbsp;&amp;c,&nbsp;s));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;volatile&nbsp;atomic_uint_least32_t&nbsp;*a&nbsp;=&nbsp;(volatile&nbsp;atomic_uint_least32_t&nbsp;*)p;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(!atomic_compare_exchange_strong(a,&nbsp;&amp;c,&nbsp;s));<br>
&nbsp;}<br>
&nbsp;<br>
&nbsp;JEMALLOC_INLINE&nbsp;void<br>
&nbsp;atomic_write_uint32(uint32_t&nbsp;*p,&nbsp;uint32_t&nbsp;x)<br>
&nbsp;{<br>
-<br>
-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;atomic_store(p,&nbsp;x);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;volatile&nbsp;atomic_uint_least32_t&nbsp;*a&nbsp;=&nbsp;(volatile&nbsp;atomic_uint_least32_t&nbsp;*)p;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;atomic_store(a,&nbsp;x);<br>
&nbsp;}<br>
&nbsp;#elif&nbsp;(defined(JEMALLOC_ATOMIC9))<br>
&nbsp;JEMALLOC_INLINE&nbsp;uint32_t&lt;/pre&gt;&lt;pre&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;&lt;br&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#000000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;For&nbsp;people&nbsp;with&nbsp;access&nbsp;to&nbsp;Android&nbsp;Open&nbsp;Source,&nbsp;a&nbsp;patch&nbsp;is&nbsp;available&nbsp;at&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;https://android-review.googlesource.com/#/c/151171&quot;&gt;https://android-review.googlesource.com/#/c/151171&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
