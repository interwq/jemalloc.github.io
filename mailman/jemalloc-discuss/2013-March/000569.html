<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Memory Fragmentation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jemalloc-discuss%40canonware.com?Subject=Re%3A%20Memory%20Fragmentation&In-Reply-To=%3CCA%2BqgMR0RCnFzjG_S-sQjmUOXpMvmOma%3Df%3DJBuQWsHnns26y%2B%3DA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000568.html">
   <LINK REL="Next"  HREF="000570.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Memory Fragmentation</H1>
    <B>Benjamin Bazso</B> 
    <A HREF="mailto:jemalloc-discuss%40canonware.com?Subject=Re%3A%20Memory%20Fragmentation&In-Reply-To=%3CCA%2BqgMR0RCnFzjG_S-sQjmUOXpMvmOma%3Df%3DJBuQWsHnns26y%2B%3DA%40mail.gmail.com%3E"
       TITLE="Memory Fragmentation">bbazso at gmail.com
       </A><BR>
    <I>Thu Mar 21 07:21:29 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000568.html">Static library usage
</A></li>
        <LI>Next message: <A HREF="000570.html">Memory Fragmentation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#569">[ date ]</a>
              <a href="thread.html#569">[ thread ]</a>
              <a href="subject.html#569">[ subject ]</a>
              <a href="author.html#569">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I am using jemalloc for my server application and I have been monitoring
the memory (rss) for several days and it continues to rise.  I have
previously monitored the application using valgrind for several days and it
reported no memory leaks.

This leads me to believe that the rise in memory consumption (rss) is due
to memory fragmentation.

With this in mind, I added to my application the call to malloc_stats_print(
**) function and I poll this function every hour and save the results.
&gt;<i>From what I see and understand from this report, I do indeed see the memory
</I>consumption rising and I also noticed that the number of bigger allocations
increases (~2.5 MB) over time.

I have been reading quite a bit about jemalloc, and what I fail to
understand how to do yet is how to use this report to support the notion
that my application is actually experiencing memory fragmentation.

So my questions are:


   1. How can I use the malloc_stats_print(**) stats to show that my
   application is suffering from memory fragmentation?
   2. Is there a way to help eliminate fragmentation in jemalloc, perhaps
   by calling an extended facility?
   3. Will using thread cache flushing and forced dirty page purging help
   reduce fragmentation? Is it a good idea?

Thanks a lot for the help and have a great day,

Benjamin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://www.canonware.com/pipermail/jemalloc-discuss/attachments/20130321/39680dd3/attachment.html">http://www.canonware.com/pipermail/jemalloc-discuss/attachments/20130321/39680dd3/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000568.html">Static library usage
</A></li>
	<LI>Next message: <A HREF="000570.html">Memory Fragmentation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#569">[ date ]</a>
              <a href="thread.html#569">[ thread ]</a>
              <a href="subject.html#569">[ subject ]</a>
              <a href="author.html#569">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.canonware.com/mailman/listinfo/jemalloc-discuss">More information about the jemalloc-discuss
mailing list</a><br>
</body></html>
